{"version":3,"sources":["../../../../../../../assets/src/components/room/desk/assets/src/components/room/desk/Desk.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../../assets/src/components/room/desk","sourcesContent":["import { GameSeat } from \"./GameSeat\";\nimport { AnswerPanel } from \"./AnswerPanel\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport class Desk extends cc.Component {\n\n    @property(AnswerPanel)\n    private answerPanel: AnswerPanel = null;\n    @property(cc.Button)\n    private answerButton: cc.Button = null;\n    @property(cc.Prefab)\n    private gameSeatPrefab: cc.Prefab = null;\n    @property(cc.Node)\n    private seatLayout: cc.Node = null;\n\n    private seatMap: any = {};\n\n    protected onLoad() {\n        this.addListeners();\n    }\n    \n    public show() {\n        this.node.active = true;\n    }\n\n    public hide() {\n        this.node.active = false;\n    }\n\n    public showAnswerButton() {\n        this.answerButton.node.active = true;\n    }\n\n    public hideAnswerButton() {\n        this.answerButton.node.active = false;\n        this.answerPanel.hide();\n    }\n\n    public onBtnAnswer() {\n        this.answerPanel.show();\n    }\n\n    public updateSeatsInfo(seatMap) {\n        this.removeAllUser();\n        for(let i in seatMap) {\n            if(seatMap[i] !== null) {\n                this.addUser(seatMap[i]);\n            }\n        }\n    }\n\n    public answerRight(seat,score) {\n        this.seatMap[seat].showTip(\"答对+\"+score);\n    }\n\n    public answerWrong(seat) {\n        this.seatMap[seat].showTip(\"答错\");\n    }\n\n    public hideAllTip() {\n        for(let i in this.seatMap){\n            this.seatMap[i].hideTip();\n        }\n    }\n\n    public addUser(user) {\n        let seatNode = cc.instantiate(this.gameSeatPrefab);\n        this.seatLayout.addChild(seatNode);\n        let gameSeat:GameSeat = seatNode.getComponent(GameSeat);\n        gameSeat.init(user);\n        this.seatMap[user.seat] = gameSeat;\n    }\n\n    public leaveUser(seat) {\n        this.seatMap[seat].node.destroy();\n    }\n\n    public removeAllUser() {\n        this.seatMap = {};\n        this.seatLayout.removeAllChildren();\n    }\n\n    private addListeners() {\n        this.answerButton.node.on(cc.Node.EventType.TOUCH_END, this.onBtnAnswer, this);\n    }\n\n}"]}